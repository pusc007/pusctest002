(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{400:function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return l})),n.d(e,"f",(function(){return v})),n.d(e,"g",(function(){return m})),n.d(e,"e",(function(){return h})),n.d(e,"d",(function(){return g})),n.d(e,"b",(function(){return _}));var a=n(402),r=n.n(a),i=n(406),s=n.n(i);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u=function(t){var e=!0,n=new Promise((function(n,a){t((function(){e&&n.apply(void 0,arguments)}),a)}));return n.cancel=function(){e=!1},n},f=function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=(e=c({type:"query",input:"",output:"",funcHeader:""},e)).funcHeader,i=e.input;i&&(r=i.split(",").map((function(t){var e=t.replace(/\:.*/g,"").replace("$","");return"".concat(e,":$").concat(e)})).toString(),i="(".concat(i,")"),r="(".concat(r,")"));var o="".concat(e.type).concat(i,"{").concat(e.funcName).concat(r).concat(e.output,"}");return s.a.post(t,{query:o,variables:n},{headers:{"x-token":a}}).then((function(t){return t.data})).then((function(t){return t.errors?{errors:t.errors}:{data:t.data[e.funcName]}})).catch((function(t){alert(t.message)}))},d=isProduction?"api":"http://localhost:4000/noise/api",p=function(t,e){return u((function(n,a){f(d,{type:"mutation",funcName:"login",input:"$casenum:String!,$carnum:String!",output:"{token}"},{casenum:t,carnum:e}).then((function(t){t.errors?a(t.errors.map((function(t){return JSON.parse(t.message)}))):n(t.data.token)}))}))},l=function(t){return u((function(e,n){f(d,{funcName:"citys"},{},t).then((function(t){t.errors?n(t.errors.map((function(t){return JSON.parse(t.message)}))):e(t.data.map((function(t){return{text:t}})))}))}))},v=function(t,e){return u((function(n,a){f(d,{funcName:"searchSites",input:"$city: String!",output:"{city,sitename}"},{city:e},t).then((function(t){t.errors?a(t.errors.map((function(t){return JSON.parse(t.message)}))):n(t.data)}))}))},m=function(t){return u((function(e,n){f(d,{funcName:"user",output:"{casenum,carnum,username,idcard,address,redate,exdate,city,site,result}"},{},t).then((function(t){t.errors?n(t.errors.map((function(t){return JSON.parse(t.message)}))):(t.data.redate&&(t.data.redate=new Date(t.data.redate).toISOString().substr(0,10)),t.data.exdate&&(t.data.exdate=new Date(t.data.exdate).toISOString().substr(0,10)),e(t.data))}))}))},h=function(t,e,n,a,r){return u((function(i,s){f(d,{funcName:"searchOpentimes",input:"$city: String!, $site: String!, $startDate: Date!, $endDate: Date!",output:"{date,count,maxcount}"},{city:e,site:n,startDate:new Date(a).getTime(),endDate:new Date(r).getTime()},t).then((function(t){t.errors?s(t.errors.map((function(t){return JSON.parse(t.message)}))):(t.data.forEach((function(t){t.date&&(t.date=new Date(t.date).toISOString().substr(0,10))})),i(t.data))}))}))},g=function(t,e,n,a){return u((function(r,i){f(d,{type:"mutation",funcName:"reservation",input:"$city: String!, $site: String!, $date: Date!"},{city:e,site:n,date:a},t).then((function(t){t.errors?i(t.errors.map((function(t){return JSON.parse(t.message)}))):r()}))}))},_=function(t,e){return u((function(n,a){f(d,{type:"mutation",funcName:"extend",input:"$date: Date!"},{date:e},t).then((function(t){t.errors?a(t.errors.map((function(t){return JSON.parse(t.message)}))):n()}))}))}},401:function(t,e,n){"use strict";e.a={methods:{logout:function(){this.$store.dispatch("setLogout"),this.$router.push({name:"Login"})},errorAction:function(t){var e=this;t.forEach((function(t){alert(t.text);["accountNoExisted","tokenInvalid","tokenExpired","tokenError","tokenNoExisted"].includes(t.type)&&(e.$store.dispatch("setLogout"),e.$router.push({name:"Login"}))}))}}}},403:function(t,e,n){"use strict";e.a=n.p+"img/logo.996f07b8ca77ffb8cfc3df411c585003.png"},404:function(t,e,n){},405:function(t,e,n){},407:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-app-bar",{staticClass:"bar",attrs:{app:"","elevate-on-scroll":""}},[n("v-container",{staticClass:"pa-0 fill-height"},[n("div",{staticClass:"mr-10 d-flex flex-md-column align-center"},[n("img",{staticClass:"logo",attrs:{src:t.logo}})]),t._v(" "),n("Menu",{staticClass:"d-none d-md-flex"}),t._v(" "),n("v-spacer"),t._v(" "),n("Logout",{staticClass:"d-none d-md-flex"}),t._v(" "),n("v-app-bar-nav-icon",{staticClass:"d-flex d-md-none",on:{click:function(e){t.$refs.sidebar.isOpen=!t.$refs.sidebar.isOpen}}})],1)],1),t._v(" "),n("Sidebar",{ref:"sidebar",scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"d-flex pa-4"},[n("Logout"),t._v(" "),n("v-spacer"),t._v(" "),n("v-icon",{on:{click:function(e){t.$refs.sidebar.isOpen=!1}}},[t._v("\n          mdi-close\n        ")])],1),t._v(" "),n("Menu",{staticClass:"d-flex flex-column"})]},proxy:!0}])})],1)};a._withStripped=!0;var r=function(){var t=this.$createElement;return(this._self._c||t)("v-btn",{staticClass:"cyan white--text",attrs:{depressed:""},on:{click:this.logout_click}},[this._v("登出")])};r._withStripped=!0;var i={mixins:[n(401).a],components:{},data:function(){return{}},mounted:function(){},methods:{logout_click:function(){this.logout()}},computed:{}},s=n(115),o=Object(s.a)(i,r,[],!1,null,"6ea3a2e6",null);o.options.__file="src/vue/pages/components/Logout.vue";var c=o.exports,u=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.$store.state.info.redate?[this.$store.state.info.exdate?this._e():e("v-btn",{staticClass:"pageItem",attrs:{depressed:"",text:"",to:{name:"Extension"},"active-class":"active"}},[this._v("展延")])]:[e("v-btn",{staticClass:"pageItem",attrs:{depressed:"",text:"",to:{name:"Reservation"},"active-class":"active"}},[this._v("預約")])],this._v(" "),e("v-btn",{staticClass:"pageItem",attrs:{depressed:"",text:"",to:{name:"Info"},"active-class":"active"}},[this._v("資訊")])],2)};u._withStripped=!0;var f={components:{},data:function(){return{}},mounted:function(){},methods:{},computed:{}},d=(n(408),Object(s.a)(f,u,[],!1,null,"3111d13b",null));d.options.__file="src/vue/pages/components/Menu.vue";var p=d.exports,l=function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-navigation-drawer",{attrs:{right:"",app:"",temporary:""},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[t._t("content")],2)};l._withStripped=!0;var v={components:{},props:{},watch:{},data:function(){return{isOpen:!1,resizeID:void 0}},mounted:function(){window.addEventListener("resize",this.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.resize)},methods:{resize:function(){var t=this;clearTimeout(this.resizeID),this.resizeID=setTimeout((function(){t.isOpen&&t.$vuetify.breakpoint.mdAndUp&&(t.isOpen=!1)}),300)}},computed:{}},m=Object(s.a)(v,l,[],!1,null,"2e4a0ea0",null);m.options.__file="src/vue/pages/components/Sidebar.vue";var h=m.exports,g=n(403),_={components:{Logout:c,Menu:p,Sidebar:h},data:function(){return{logo:g.a}},mounted:function(){},methods:{},computed:{}},b=(n(409),Object(s.a)(_,a,[],!1,null,"023c3669",null));b.options.__file="src/vue/pages/components/Header.vue";e.a=b.exports},408:function(t,e,n){"use strict";n(404)},409:function(t,e,n){"use strict";n(405)},424:function(t,e,n){},475:function(t,e,n){"use strict";n(424)},479:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-sheet",{staticClass:"content"},[n("Header"),t._v(" "),n("v-main",{staticClass:"main"},[n("v-container",[n("div",{staticClass:"d-flex justify-center ma-4"},[t._v("檢測資訊")]),t._v(" "),n("div",{staticClass:"d-flex justify-center"},[t.infoLoading?n("div",{staticClass:"d-flex justify-center text-h6"},[t._v("載入中...")]):n("v-card",{staticClass:"pa-4",attrs:{flat:""}},[n("v-card-text",[n("div",{staticClass:"text-h6 ma-2"},[t._v("公文號："+t._s(t.info.casenum))]),t._v(" "),n("div",{staticClass:"text-h6 ma-2"},[t._v("車牌號："+t._s(t.info.carnum))]),t._v(" "),n("div",{staticClass:"text-h6 ma-2"},[t._v("檢測縣市："+t._s(t.info.city))]),t._v(" "),n("div",{staticClass:"text-h6 ma-2"},[t._v("檢測站點："+t._s(t.info.site))]),t._v(" "),n("div",{staticClass:"text-h6 ma-2"},[t._v("預約日期："+t._s(t.info.redate))]),t._v(" "),n("div",{staticClass:"text-h6 ma-2"},[t._v("展延日期："+t._s(t.info.exdate))]),t._v(" "),n("div",{staticClass:"text-h6 ma-2"},[t._v("檢測結果："+t._s(t.info.result))])])],1)],1)])],1)],1)};a._withStripped=!0;var r=n(407),i=n(400),s={components:{Header:r.a},data:function(){return{info:{},infoLoading:!1}},mounted:function(){var t=this;this.infoLoading=!0,Object(i.g)(this.$store.state.token).then((function(e){t.infoLoading=!1,t.info=e}))},methods:{},computed:{}},o=(n(475),n(115)),c=Object(o.a)(s,a,[],!1,null,"771daf7b",null);c.options.__file="src/vue/pages/Info.vue";e.default=c.exports}}]);