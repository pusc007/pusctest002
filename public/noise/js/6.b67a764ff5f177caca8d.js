(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{400:function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return l})),n.d(e,"f",(function(){return m})),n.d(e,"g",(function(){return v})),n.d(e,"e",(function(){return g})),n.d(e,"d",(function(){return h})),n.d(e,"b",(function(){return y}));var r=n(402),a=n.n(r),o=n(406),i=n.n(o);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u=function(t){var e=!0,n=new Promise((function(n,r){t((function(){e&&n.apply(void 0,arguments)}),r)}));return n.cancel=function(){e=!1},n},d=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=(e=s({type:"query",input:"",output:"",funcHeader:""},e)).funcHeader,o=e.input;o&&(a=o.split(",").map((function(t){var e=t.replace(/\:.*/g,"").replace("$","");return"".concat(e,":$").concat(e)})).toString(),o="(".concat(o,")"),a="(".concat(a,")"));var c="".concat(e.type).concat(o,"{").concat(e.funcName).concat(a).concat(e.output,"}");return i.a.post(t,{query:c,variables:n},{headers:{"x-token":r}}).then((function(t){return t.data})).then((function(t){return t.errors?{errors:t.errors}:{data:t.data[e.funcName]}})).catch((function(t){alert(t.message)}))},f="api",p=function(t,e){return u((function(n,r){d(f,{type:"mutation",funcName:"login",input:"$casenum:String!,$carnum:String!",output:"{token}"},{casenum:t,carnum:e}).then((function(t){t.errors?r(t.errors.map((function(t){return JSON.parse(t.message)}))):n(t.data.token)}))}))},l=function(t){return u((function(e,n){d(f,{funcName:"citys"},{},t).then((function(t){t.errors?n(t.errors.map((function(t){return JSON.parse(t.message)}))):e(t.data.map((function(t){return{text:t}})))}))}))},m=function(t,e){return u((function(n,r){d(f,{funcName:"searchSites",input:"$city: String!",output:"{city,sitename}"},{city:e},t).then((function(t){t.errors?r(t.errors.map((function(t){return JSON.parse(t.message)}))):n(t.data)}))}))},v=function(t){return u((function(e,n){d(f,{funcName:"user",output:"{casenum,carnum,username,idcard,address,redate,exdate,city,site,result}"},{},t).then((function(t){t.errors?n(t.errors.map((function(t){return JSON.parse(t.message)}))):(t.data.redate&&(t.data.redate=new Date(t.data.redate).toISOString().substr(0,10)),t.data.exdate&&(t.data.exdate=new Date(t.data.exdate).toISOString().substr(0,10)),e(t.data))}))}))},g=function(t,e,n,r,a){return u((function(o,i){d(f,{funcName:"searchOpentimes",input:"$city: String!, $site: String!, $startDate: Date!, $endDate: Date!",output:"{date,count,maxcount}"},{city:e,site:n,startDate:new Date(r).getTime(),endDate:new Date(a).getTime()},t).then((function(t){t.errors?i(t.errors.map((function(t){return JSON.parse(t.message)}))):(t.data.forEach((function(t){t.date&&(t.date=new Date(t.date).toISOString().substr(0,10))})),o(t.data))}))}))},h=function(t,e,n,r){return u((function(a,o){d(f,{type:"mutation",funcName:"reservation",input:"$city: String!, $site: String!, $date: Date!"},{city:e,site:n,date:r},t).then((function(t){t.errors?o(t.errors.map((function(t){return JSON.parse(t.message)}))):a()}))}))},y=function(t,e){return u((function(n,r){d(f,{type:"mutation",funcName:"extend",input:"$date: Date!"},{date:e},t).then((function(t){t.errors?r(t.errors.map((function(t){return JSON.parse(t.message)}))):n()}))}))}},401:function(t,e,n){"use strict";e.a={methods:{logout:function(){this.$store.dispatch("setLogout"),this.$router.push({name:"Login"})},errorAction:function(t){var e=this;t.forEach((function(t){alert(t.text);["accountNoExisted","tokenInvalid","tokenExpired","tokenError","tokenNoExisted"].includes(t.type)&&(e.$store.dispatch("setLogout"),e.$router.push({name:"Login"}))}))}}}},403:function(t,e,n){"use strict";e.a=n.p+"img/logo.996f07b8ca77ffb8cfc3df411c585003.png"},419:function(t,e,n){},470:function(t,e,n){"use strict";n(419)},476:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-main",{staticClass:"main"},[n("v-container",{staticClass:"d-flex justify-center align-center",attrs:{"fill-height":"",fluid:""}},[n("v-card",{attrs:{flat:""}},[n("v-card-title",{staticClass:"pa-0 pa-md-2 flex-column justify-center"},[n("img",{staticClass:"logo",attrs:{src:t.logo}}),t._v(" "),n("div",{staticClass:"text-h6 mt-4"},[t._v("使用中機動車輛噪音通知到檢")]),t._v(" "),n("div",{staticClass:"text-h6 my-2"},[t._v("線上預約系統")])]),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{"error-messages":t.accountErrors},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}},[n("div",{staticClass:"textLabel bold text-h6",attrs:{slot:"prepend"},slot:"prepend"},[t._v("公文號")])]),t._v(" "),n("v-text-field",{attrs:{"error-messages":t.passwordErrors},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[n("div",{staticClass:"textLabel bold text-h6",attrs:{slot:"prepend"},slot:"prepend"},[t._v("車牌號")])])],1),t._v(" "),n("v-card-actions",{staticClass:"justify-end"},[n("v-btn",{staticClass:"cyan white--text",attrs:{depressed:""},on:{click:t.loginBtn_click}},[t._v("登入")])],1)],1)],1),t._v(" "),n("v-overlay",{attrs:{value:t.loading}},[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}},[t._v("登入中...")])],1)],1)};r._withStripped=!0;var a=n(446),o=n(444),i=n(400),c=n(403),s=n(401),u={mixins:[o.validationMixin,s.a],components:{},validations:{account:{required:a.required},password:{required:a.required}},data:function(){return{logo:c.a,account:"",password:"",loading:!1}},mounted:function(){},methods:{loginBtn_click:function(){var t=this;this.$v.$touch(),this.$v.$error||(this.loading=!0,Object(i.c)(this.account,this.password).then((function(e){t.loading=!1,t.$store.dispatch("setLogin",e),t.$router.push({name:"GetInfo"})})).catch((function(e){t.loading=!1,t.errorAction(e)})))}},computed:{accountErrors:function(){if(this.$v.account.$dirty)return this.$v.account.required?void 0:"請填寫這個欄位。"},passwordErrors:function(){if(this.$v.password.$dirty)return this.$v.password.required?void 0:"請填寫這個欄位。"}}},d=(n(470),n(115)),f=Object(d.a)(u,r,[],!1,null,"8155e628",null);f.options.__file="src/vue/pages/Login.vue";e.default=f.exports}}]);